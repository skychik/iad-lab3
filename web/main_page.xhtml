<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ace="http://www.icefaces.org/icefaces/components">
    <h:head>
        <title>IAD: Lab3</title>
        <h:outputStylesheet library="css" name="main_page.css"/>
        <h:outputScript library="js" name="canvas.js"/>
    </h:head>
    <h:body>
        <f:view>
            <h:form id="form">
                <table>
                    <tr>
                        <td colspan="4">
                            <div class="marquee">
        Shapka of Esakov Kirill Igorevich, of the blood of Old Chelyaba. King of Uranus, and the First Spilled Lessons, Gentelman Regnant of the Eight Semesters, Khal of the Great City on the Neva, Breaker of Bugs, the Unexpelled, from group №P3200 (var №6845)
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td><h:outputLabel value="X" for="xValue" /></td>
                        <td>
                            <ace:sliderEntry id="xValue"
                                             value="#{mainPage.x}"
                                             valueChangeListener="#{mainPage.setX}"
                                             min="-3"
                                             max="3"
                                             showLabels="true"
                                             stepPercent="8.3333">
                                    <ace:ajax render="xOutput" event="slide" execute="xValue"/>
                            </ace:sliderEntry>
                            <h:outputText id="xOutput" value="#{mainPage.x}"/>
                        </td>
                        <td>
                            <h:message id="xWarning"
                                       for="xValue"
                                       styleClass="message"/>
                        </td>
                        <td rowspan="3">
                            <canvas id="canvas" width="250" height="250" onclick="add_point_on_click(event)"/>
                        </td>
                    </tr>
                    <tr>
                        <td><h:outputLabel value="Y" for="yValue" /></td>
                        <td>
                            <h:inputText id="yValue"
                                         value="#{mainPage.y}">
                                <f:validateDoubleRange minimum="-5"
                                                       maximum="3"/>
                                <f:ajax render="yOutput" execute="yValue"/>
                            </h:inputText>
                            <h:outputText id="yOutput" value="#{mainPage.y}"/>
                        </td>
                        <td>
                            <h:message id="yWarning"
                                       for="yValue"
                                       styleClass="message"/>
                        </td>
                    </tr>
                    <tr>
                        <td><h:outputLabel value="R" for="rValue"/></td>
                        <td>
                            <h:commandButton id="rValue1"
                                             value="1"
                                             action="#{mainPage.setR(1.0)}">
                                <f:ajax render="rValue" execute="rValue1"/>
                            </h:commandButton>
                            <h:commandButton id="rValue15"
                                             value="1.5"
                                             action="#{mainPage.setR(1.5)}">
                                <f:ajax render="rValue" execute="rValue15"/>
                            </h:commandButton>
                            <h:commandButton id="rValue2"
                                             value="2"
                                             action="#{mainPage.setR(2.0)}">
                                <f:ajax render="rValue" execute="rValue2"/>
                            </h:commandButton>
                            <h:commandButton id="rValue25"
                                             value="2.5"
                                             action="#{mainPage.setR(2.5)}">
                                <f:ajax render="rValue" execute="rValue25"/>
                            </h:commandButton>
                            <h:commandButton id="rValue3"
                                             value="3"
                                             action="#{mainPage.setR(3.0)}">
                                <f:ajax render="rValue" execute="rValue3"/>
                            </h:commandButton>
                            <h:outputText id="rValue" value="#{mainPage.r}" />
                        </td>
                        <td>
                            <h:message id="rWarning"
                                       for="rValue"
                                       styleClass="message"/>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <h:commandButton id="submit"
                                             value="Submit"
                                             action="#{mainPage.submit}"
                                             onclick="draw_point_on_submit()"/>
                        </td>
                        <td>
                            <h:message for="submit"
                                       styleClass="message"/>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="4">
                            <h:dataTable id="pointTable"
                                         value="#{mainPage.points}"
                                         var="point"
                                         styleClass="pointTable"
                                         headerClass="pointTableHeader"
                                         rowClasses="pointTableOddRow,pointTableEvenRow">
                                <h:column>
                                    <f:facet name="header">X</f:facet>
                                    #{point.x}
                                </h:column>
                                <h:column>
                                    <f:facet name="header">Y</f:facet>
                                    #{point.y}
                                </h:column>
                                <h:column>
                                    <f:facet name="header">R</f:facet>
                                    #{point.r}
                                </h:column>
                                <h:column>
                                    <f:facet name="header">Is in range</f:facet>
                                    #{point.inRange}
                                </h:column>
                            </h:dataTable>
                        </td>
                    </tr>
                </table>
                <script type="text/javascript">
                    addPoints();
                </script>
            </h:form>
        </f:view>
    </h:body>
</html>
